%!TEX root = ../_main.tex
\newcounter{theorem}[section]
\renewcommand{\thetheorem}{\thesection.\arabic{theorem}}
\setenumerate{ref=\thetheorem.\arabic*}

\numberwithin{figure}{section}
\numberwithin{table}{section}
\numberwithin{equation}{theorem}

\renewcommand{\baselinestretch}{1.0}\normalsize

\lstset{numbers=left, stepnumber=1, breaklines=true, tabsize=2,
basicstyle=\ttfamily\scriptsize}
\lstset{
	emph={
		function, local, for, while, if, then, elif, else, fi, do, od, return, end
	},
	emphstyle={\color{black}\bfseries}
%	morecomment={[l][\color{gray}]{#}},
%	morestring={[b][\color{red}]"},
}

\newcommand{\defword}[1]{\textit{\textbf{#1}}}

\newcolumntype{M}{>{$\vcenter\bgroup\hbox\bgroup}l<{\egroup\egroup$}}

\makeatletter
\let\@old@begintheorem=\@begintheorem
\def\@begintheorem#1#2[#3]{%
	\gdef\@thm@type{#1}%
	\gdef\@thm@num{#2}%
	\gdef\@thm@name{#3}%
	\@old@begintheorem{#1}{#2}[#3]%
}
\let\@old@begintable=\@begintable
\def\@begintable#1{%
	\gdef\@thm@type{#1}%
	\@old@begintheorem{#1}%
}
\def\typedlabel#1{\begingroup
	\edef\@currentlabel{\@thm@type~\@thm@num}%
	\label{#1}\endgroup
}
\def\namedlabel#1{\begingroup
	\edef\@currentlabel{\@thm@name}%
	\label{#1}\endgroup
}
\makeatother

\newcommand{\todo}[0]{{\color{red} \textbf{TODO}}}

\newcommand{\theocite}[2]{\cite[#1]{#2}.}